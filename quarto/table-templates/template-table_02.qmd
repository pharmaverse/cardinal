---
title: FDA Table 2
subtitle: Baseline Demographic and Clinical Characteristics, Safety Population, Pooled Analyses
format: html
---

::: panel-tabset
## Spec. Screenshot

![](../assets/images/screenshots/table_02.png){fig-align="center"}

## gtsummary Table

<details>
  <summary>gtsummary Table Setup</summary>
```{r tbl2, eval=FALSE, echo=TRUE}
# Load Libraries & Data
library(cardinal)
library(dplyr)

adsl <- random.cdisc.data::cadsl
advs <- random.cdisc.data::cadvs

# Pre-Processing - Add any variables needed in your table to df
adsl <- adsl %>%
  mutate(AGEGR1 = as.factor(case_when(
    AGE >= 17 & AGE < 65 ~ ">=17 to <65",
    AGE >= 65 ~ ">=65",
    AGE >= 65 & AGE < 75 ~ ">=65 to <75",
    AGE >= 75 ~ ">=75"
  )))

advs <- advs %>%
  filter(AVISIT == "BASELINE", VSTESTCD == "TEMP") %>%
  select("USUBJID", "AVAL")

anl <- left_join(adsl, advs, by = "USUBJID")

# Output Table
make_table_02(
  df = anl,
  vars = c("SEX", "AGE", "AGEGR1", "RACE", "ETHNIC", "COUNTRY", "AVAL"),
  lbl_vars = c(
    "Sex", "Age, years", "Age Group, years", "Race", "Ethnicity",
    "Country of Participation", "Baseline Temperature (C)"
  )
)
```
</details>

```{r tbl2, message=FALSE, warning=FALSE, eval=TRUE}
```


## Table

```{r tbl_gtsummary, message=FALSE, warning=FALSE}
# Load Libraries & Data
library(cardinal)
library(dplyr)

adsl <- random.cdisc.data::cadsl
advs <- random.cdisc.data::cadvs

# Pre-Processing - Add any variables needed in your table to df
adsl <- adsl %>%
  mutate(AGEGR1 = as.factor(case_when(
    AGE >= 17 & AGE < 65 ~ "≥17 to &lt;65",
    AGE >= 65 ~ "≥65",
    AGE >= 65 & AGE < 75 ~ "≥65 to &lt;75",
    AGE >= 75 ~ "≥75"
  )))

advs <- advs %>%
  filter(AVISIT == "BASELINE", VSTESTCD == "TEMP") %>%
  select("USUBJID", "AVAL")

anl <- left_join(adsl, advs, by = "USUBJID")

# Output Table
make_table_02(
  df = anl,
  vars = c("SEX", "AGE", "AGEGR1", "RACE", "ETHNIC", "COUNTRY", "AVAL"),
  lbl_vars = c(
    "Sex", "Age, years", "Age Group years", "Race", "Ethnicity",
    "Country of Participation", "Baseline Temperature (C)"
  )
)
```

## gtsummary Table Setup

```{r tbl_gtsummary, eval=FALSE, echo=TRUE}
```

## Function Details: `make_table_02`

### `make_table_02()`

------------------------------------------------------------------------

Required variables:

-   **`df`**: `SAFFL` and the variables specified by `vars` and `arm_var`.
-   **`alt_counts_df`** (if specified and `tplyr_raw = FALSE`): `SAFFL`, `USUBJID`, and the variable specified by `arm_var`.

| **Argument**     | **Description**                                                                                                                                          | **Default**                                              |
|:-----------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------|:---------------------------------------------------------|
| `df`             | (`data.frame`) Dataset (typically ADSL) required to build table.                                                                                         | *No default*                                             |
| `alt_counts_df`  | (`character`) Alternative dataset used only to calculate column counts.                                                                                  | `NULL`                                                   |
| `show_colcounts` | (`flag`) Whether column counts should be printed.                                                                                                        | `TRUE`                                                   |
| `arm_var`        | (`character`) Arm variable used to split table into columns.                                                                                             | `"ARM"`                                                  |
| `saffl_var`      | (`character`) Flag variable used to indicate inclusion in safety population.                                                                             | `"SAFFL"`                                                |
| `vars`           | (`character`) Variables from `df` to include in the table.                                                                                               | `c("SEX", "AGE", "AGEGR1", "RACE", "ETHNIC", "COUNTRY")` |
| `lbl_vars`       | (`character`) Labels corresponding to variables in `vars` to print in the table. Labels should be ordered according to the order of variables in `vars`. | `formatters::var_labels(df, fill = TRUE)[vars]`          |
| `lbl_overall`    | (`character`) If specified, an overall column will be added to the table with the given value as the column label.                                       | `"Total Population"`                                     |

Source code for this function is available [here](https://github.com/pharmaverse/cardinal/blob/main/R/fda-table_02.R#L34).
:::
