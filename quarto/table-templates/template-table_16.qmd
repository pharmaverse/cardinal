---
title: FDA Table 16
subtitle: Patients With Adverse Events by Male-Specific FDA Medical Query (Broad) and Preferred Term, Male Safety Population, Pooled Analyses
format: html
---

::: panel-tabset
## Spec. Screenshot

![](../assets/images/screenshots/table_16.png){fig-align="center"}

## Table

```{r tbl, message=FALSE, warning=FALSE}
# Load Libraries & Data
library(scda)
library(falcon)

adsl <- scda::synthetic_cdisc_dataset("rcd_2022_10_13", "adsl")
adae <- scda::synthetic_cdisc_dataset("rcd_2022_10_13", "adae")

# Pre-Processing - Ensure required variables FMQ01SC and FMQ01NAM exist in adae
set.seed(1)
adae <- dplyr::rename(adae, FMQ01SC = SMQ01SC, FMQ01NAM = SMQ01NAM)
levels(adae$FMQ01SC) <- c("BROAD", "NARROW")
adae$FMQ01SC[is.na(adae$FMQ01SC)] <- "NARROW"
adae$FMQ01NAM <- factor(adae$FMQ01NAM, levels = c(unique(adae$FMQ01NAM), "Erectile Dysfunction", "Gynecomastia"))
adae$FMQ01NAM[adae$SEX == "M"] <- as.factor(
  sample(c("Erectile Dysfunction", "Gynecomastia"), sum(adae$SEX == "M"), replace = TRUE)
)

# Output Table
risk_diff <- list(arm_x = "B: Placebo", arm_y = "A: Drug X")
make_table_16(adae = adae, alt_counts_df = adsl, risk_diff = risk_diff)
```

## Table Setup

```{r tbl, eval=FALSE, echo=TRUE}
```

## Function Details

### `make_table_16()`

------------------------------------------------------------------------

Required variables:

-   **`adae`**: `adae` must contain `USUBJID`, `SEX`, and the variables
    specified by `arm_var`, `saffl_var`, `pref_var`, `fmqsc_var` and
    `fmqnam_var`.
-   **`alt_counts_df`** (if specified): `USUBJID` and the variables
    specified by `arm_var` and `saffl_var`.

+----------+-------------------------------------+----------+
| Argument | Description                         | Default  |
+:=========+:====================================+:=========+
| `adae`   | (`data.frame`) Dataset (typically   | *No      |
|          | ADAE) required to build table.      | default* |
+----------+-------------------------------------+----------+
| `alt_co  | (`character`) Alternative dataset   | `NULL`   |
| unts_df` | used only to calculate column       |          |
|          | counts.                             |          |
+----------+-------------------------------------+----------+
| `show_co | (`flag`) Whether column counts      | `TRUE`   |
| lcounts` | should be printed.                  |          |
+----------+-------------------------------------+----------+
| `        | (`character`) Arm variable used to  | `"ARM"`  |
| arm_var` | split table into columns.           |          |
+----------+-------------------------------------+----------+
| `sa      | (`character`) Flag variable used to | `        |
| ffl_var` | indicate inclusion in safety        | "SAFFL"` |
|          | population.                         |          |
+----------+-------------------------------------+----------+
| `p       | (`character`) Preferred term        | `"A      |
| ref_var` | variable to use in table.           | EDECOD"` |
+----------+-------------------------------------+----------+
| `se      | (`character`) Sex variable to use   | `"M"`    |
| x_scope` | in table.                           |          |
+----------+-------------------------------------+----------+
| `fm      | (`character`) FMQ scope value to    | `        |
| q_scope` | use in table.                       | "BROAD"` |
+----------+-------------------------------------+----------+
| `fm      | (`character`) FMQ scope variable to | `"F      |
| qsc_var` | use in table.                       | MQ01SC"` |
+----------+-------------------------------------+----------+
| `fmq     | (`character`) FMQ reference name    | `"FM     |
| nam_var` | variable to use in table.           | Q01NAM"` |
+----------+-------------------------------------+----------+
| `lbl_    | (`character`) If specified, an      | `NULL`   |
| overall` | overall column will be added to the |          |
|          | table with the given value as the   |          |
|          | column label.                       |          |
+----------+-------------------------------------+----------+
| `ri      | (named `list`) List of settings to  | `NULL`   |
| sk_diff` | apply to add a risk difference      |          |
|          | column to the table. See            |          |
|          | [tern::add_riskdiff()](https:       |          |
|          | //insightsengineering.github.io/ter |          |
|          | n/main/reference/add_riskdiff.html) |          |
|          | for more details. List should       |          |
|          | contain the following elements:     |          |
|          |                                     |          |
|          | -   `arm_x`: (required) the name of |          |
|          |     reference arm.                  |          |
|          |                                     |          |
|          | -   `arm_y`: (required) the name of |          |
|          |     the arm to compare to the       |          |
|          |     reference arm.                  |          |
|          |                                     |          |
|          | -   `col_label`: (optional) label   |          |
|          |     to use for the risk difference  |          |
|          |     column. Defaults to             |          |
|          |                                     |          |
|          |   `"Risk Difference (%) (95% CI)"`. |          |
|          |                                     |          |
|          | -   `pct`: (optional) whether the   |          |
|          |     output should be returned as    |          |
|          |     percentages. Defaults to        |          |
|          |     `TRUE`.                         |          |
+----------+-------------------------------------+----------+
| `        | (`flag`) Whether all-zero rows      | `FALSE`  |
| prune_0` | should be removed from the table.   |          |
+----------+-------------------------------------+----------+
| `n       | (`character`) String to represent   | `"<Mi    |
| a_level` | missing values.                     | ssing>"` |
+----------+-------------------------------------+----------+
| `anno    | (named `list` of `character`) List  | `NULL`   |
| tations` | of annotations to add to the table. |          |
|          | Valid annotation types are `title`, |          |
|          | `subtitles`, `main_footer`, and     |          |
|          | `prov_footer.` Each name-value pair |          |
|          | should use the annotation type as   |          |
|          | name and the desired string as      |          |
|          | value.                              |          |
+----------+-------------------------------------+----------+

Source code for this function is available
[here](https://github.com/pharmaverse/falcon/blob/main/R/fda-table_16.R).
:::
