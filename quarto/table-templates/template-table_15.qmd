---
title: FDA Table 15
subtitle: Patients With Adverse Events by Male-Specific FDA Medical Query (Narrow) and Preferred Term, Male Safety Population, Pooled Analyses
format: html
---

::: panel-tabset
## Spec. Screenshot

![](../assets/images/screenshots/table_15.png){fig-align="center"}

## Table

```{r tbl, message=FALSE, warning=FALSE}
# Load Libraries & Data
library(scda)
library(falcon)

adsl <- scda::synthetic_cdisc_dataset("rcd_2022_10_13", "adsl")
adae <- scda::synthetic_cdisc_dataset("rcd_2022_10_13", "adae")

# Pre-Processing - Ensure required variables FMQ01SC and FMQ01NAM exist in adae
set.seed(1)
adae <- dplyr::rename(adae, FMQ01SC = SMQ01SC, FMQ01NAM = SMQ01NAM)
levels(adae$FMQ01SC) <- c("BROAD", "NARROW")
adae$FMQ01SC[is.na(adae$FMQ01SC)] <- "NARROW"
adae$FMQ01NAM <- factor(adae$FMQ01NAM, levels = c(unique(adae$FMQ01NAM), "Erectile Dysfunction", "Gynecomastia"))
adae$FMQ01NAM[adae$SEX == "M"] <- as.factor(
  sample(c("Erectile Dysfunction", "Gynecomastia"), sum(adae$SEX == "M"), replace = TRUE)
)

# Output Table
risk_diff <- list(arm_x = "B: Placebo", arm_y = "A: Drug X")
make_table_15(adae = adae, alt_counts_df = adsl, risk_diff = risk_diff)
```

## Table Setup

```{r tbl, eval=FALSE, echo=TRUE}
```

## Function Details

### `make_table_15()`

------------------------------------------------------------------------

Required variables:

-   **`adae`**: `adae` must contain `USUBJID`, `SEX`, and the variables
    specified by `arm_var`, `saffl_var`, `pref_var`, `fmqsc_var` and
    `fmqnam_var`.
-   **`alt_counts_df`** (if specified): `USUBJID` and the variables
    specified by `arm_var` and `saffl_var`.

+-----------+--------------------------------------------------+----------+
| Argument  | Description                                      | Default  |
+:==========+:=================================================+:=========+
| `adae`    | (`data.frame`) Dataset (typically ADAE) required | *No      |
|           | to build table.                                  | default* |
+-----------+--------------------------------------------------+----------+
| `alt_c    | (`character`) Alternative dataset used only to   | `NULL`   |
| ounts_df` | calculate column counts.                         |          |
+-----------+--------------------------------------------------+----------+
| `show_c   | (`flag`) Whether column counts should be         | `TRUE`   |
| olcounts` | printed.                                         |          |
+-----------+--------------------------------------------------+----------+
| `arm_var` | (`character`) Arm variable used to split table   | `"ARM"`  |
|           | into columns.                                    |          |
+-----------+--------------------------------------------------+----------+
| `s        | (`character`) Flag variable used to indicate     | `        |
| affl_var` | inclusion in safety population.                  | "SAFFL"` |
+-----------+--------------------------------------------------+----------+
| `         | (`character`) Preferred term variable to use in  | `"A      |
| pref_var` | table.                                           | EDECOD"` |
+-----------+--------------------------------------------------+----------+
| `s        | (`character`) Sex variable to use in table.      | `"M"`    |
| ex_scope` |                                                  |          |
+-----------+--------------------------------------------------+----------+
| `f        | (`character`) FMQ scope value to use in table.   | `"       |
| mq_scope` |                                                  | NARROW"` |
+-----------+--------------------------------------------------+----------+
| `f        | (`character`) FMQ scope variable to use in       | `"F      |
| mqsc_var` | table.                                           | MQ01SC"` |
+-----------+--------------------------------------------------+----------+
| `fm       | (`character`) FMQ reference name variable to use | `"FM     |
| qnam_var` | in table.                                        | Q01NAM"` |
+-----------+--------------------------------------------------+----------+
| `lbl      | (`character`) If specified, an overall column    | `NULL`   |
| _overall` | will be added to the table with the given value  |          |
|           | as the column label.                             |          |
+-----------+--------------------------------------------------+----------+
| `r        | (named `list`) List of settings to apply to add  | `NULL`   |
| isk_diff` | a risk difference column to the table. See       |          |
|           | [te                                              |          |
|           | rn::add_riskdiff()](https://insightsengineering. |          |
|           | github.io/tern/main/reference/add_riskdiff.html) |          |
|           | for more details. List should contain the        |          |
|           | following elements:                              |          |
|           |                                                  |          |
|           | -   `arm_x`: (required) the name of reference    |          |
|           |     arm.                                         |          |
|           |                                                  |          |
|           | -   `arm_y`: (required) the name of the arm to   |          |
|           |     compare to the reference arm.                |          |
|           |                                                  |          |
|           | -   `col_label`: (optional) label to use for the |          |
|           |     risk difference column. Defaults to          |          |
|           |     `"Risk Difference (%) (95% CI)"`.            |          |
|           |                                                  |          |
|           | -   `pct`: (optional) whether the output should  |          |
|           |     be returned as percentages. Defaults to      |          |
|           |     `TRUE`.                                      |          |
+-----------+--------------------------------------------------+----------+
| `prune_0` | (`flag`) Whether all-zero rows should be removed | `FALSE`  |
|           | from the table.                                  |          |
+-----------+--------------------------------------------------+----------+
| `         | (`character`) String to represent missing        | `"<Mi    |
| na_level` | values.                                          | ssing>"` |
+-----------+--------------------------------------------------+----------+
| `ann      | (named `list` of `character`) List of            | `NULL`   |
| otations` | annotations to add to the table. Valid           |          |
|           | annotation types are `title`, `subtitles`,       |          |
|           | `main_footer`, and `prov_footer.` Each           |          |
|           | name-value pair should use the annotation type   |          |
|           | as name and the desired string as value.         |          |
+-----------+--------------------------------------------------+----------+

Source code for this function is available
[here](https://github.com/pharmaverse/falcon/blob/main/R/fda-table_15.R).
:::
