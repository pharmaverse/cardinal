---
title: FDA Table 3
subtitle: Patient Screening and Enrollment, Trials A and B
format: html
---

::: panel-tabset
## Spec. Screenshot

![](../assets/images/screenshots/table_03.png){fig-align="center"}

## Table

```{r tbl, message=FALSE, warning=FALSE}
# Load Libraries & Data
library(dplyr)
library(falcon)
library(scda)

adsl <- scda::synthetic_cdisc_dataset("rcd_2022_10_13", "adsl")

# Pre-Processing - Add any variables needed in your table to df
adsl <- adsl %>%
  dplyr::mutate(
    SCRNFL = sample(c(TRUE, NA), size = nrow(adsl), replace = TRUE),
    SCRNFLRS = sample(c("Inclusion/exclusion criteria not met",
                        "Patient noncompliance",
                        "Consent withdrawn",
                        "Other"), size = nrow(adsl), replace = TRUE),
    ENRLFL = sample(c(TRUE, NA), size = nrow(adsl), replace = TRUE),
    RANDFL = sample(c(TRUE, NA), size = nrow(adsl), replace = TRUE)
  )

labels <- c("SCRNFL" = "Patients screened",
            "SCRNFLRS" = "Reason for SCRNFL=N",
            "ENRLFL" = "Patients enrolled",
            "RANDFL" = "Patients randomized"
)

formatters::var_labels(adsl)[names(labels)] <- labels

# Output Table
make_table_03(df = adsl)
```

## Table Setup

```{r tbl, eval=FALSE, echo=TRUE}
```

## Function Details

### `make_table_3()`

------------------------------------------------------------------------

Required variables:

-   **`adsl`**: USUBJID`,`SCRNFL`,`SCRNFLRS`,`ENRLFL`,`RANDFL`and the variables specified by`arm_var`.
-   **`alt_counts_df`** (if specified): `USUBJID`, and the variable specified by `arm_var`.

| Argument         | Description                                                                                                                                                                                                                                            | Default      |
|:-----------------|:----------------------------------|:-----------------|
| `adsl`           | (`data.frame`) Dataset (typically ADSL) required to build table.                                                                                                                                                                                       | *No default* |
| `alt_counts_df`  | (`character`) Alternative dataset used only to calculate column counts.                                                                                                                                                                                | `NULL`       |
| `show_colcounts` | (`flag`) Whether column counts should be printed.                                                                                                                                                                                                      | `FALSE`      |
| `arm_var`        | (`character`) Arm variable used to split table into columns.                                                                                                                                                                                           | `"ARM"`      |
| `lbl_overall`    | (`character`) If specified, an overall column will be added to the table with the given value as the column label.                                                                                                                                     | `NULL`       |
| `prune_0`        | (`flag`) Whether all-zero rows should be removed from the table.                                                                                                                                                                                       | `TRUE`       |
| `annotations`    | (named `list` of `character`) List of annotations to add to the table. Valid annotation types are `title`, `subtitles`, `main_footer`, and `prov_footer.` Each name-value pair should use the annotation type as name and the desired string as value. | `NULL`     |

Source code for this function is available [here](https://github.com/pharmaverse/falcon/blob/main/R/fda-table_03.R).
:::
