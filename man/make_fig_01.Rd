% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fda-fig_01.R
\name{make_fig_01}
\alias{make_fig_01}
\title{FDA Figure 1: Time to Permanent Discontinuation of Study Drug, Safety Population, Pooled Analyses}
\usage{
make_fig_01(
  df,
  arm_var = "ARM",
  id_var = "USUBJID",
  saffl_var = "SAFFL",
  trtsdtm_var = "TRTSDTM",
  trtedtm_var = "TRTEDTM",
  u_trtdur = "days",
  x_lab = paste0("Time from first dose (", u_trtdur, ")"),
  y_lab = "Percent of Patients (\%)",
  xticks = NA,
  add_table = TRUE,
  annotations = NULL
)
}
\arguments{
\item{df}{(\code{data.frame})\cr dataset required to build table.}

\item{arm_var}{(\code{character})\cr arm variable used to split table into columns.}

\item{id_var}{(\code{character})\cr variable used as unique subject identifier.}

\item{saffl_var}{(\code{character})\cr flag variable used to indicate inclusion in safety population.}

\item{trtsdtm_var}{(\code{character})\cr treatment start datetime variable.}

\item{trtedtm_var}{(\code{character})\cr treatment end datetime variable.}

\item{u_trtdur}{(\code{character})\cr unit for duration of treatment. Options are \code{"days"}, \code{"weeks"}, \code{"months"},
and \code{"years"}.}

\item{x_lab}{(\code{character})\cr x-axis label.}

\item{y_lab}{(\code{character})\cr y-axis label.}

\item{xticks}{(\code{vector} of \code{numeric})\cr x-axis tick positions. If \code{NA} (default), tick mark positions are
automatically calculated.}

\item{add_table}{(\code{flag})\cr whether "Number of Patients" table should be printed under the plot.}

\item{annotations}{(named \code{list} of \code{character})\cr list of annotations to add to the figure. Valid annotation types
are \code{title}, \code{subtitles}, and \code{caption}. Each name-value pair should use the annotation type as name and the
desired string as value.}
}
\value{
A \code{ggplot2} object.
}
\description{
FDA Figure 1: Time to Permanent Discontinuation of Study Drug, Safety Population, Pooled Analyses
}
\details{
\itemize{
\item \code{df} must contain the variables specified by \code{arm_var}, \code{id_var}, \code{saffl_var}, \code{trtsdtm_var}, and \code{trtedtm_var}.
\item Flag variables (i.e. \code{XXXFL}) are expected to have two levels: \code{"Y"} (true) and \code{"N"} (false). Missing values in
flag variables are treated as \code{"N"}.
\item It is assumed that every record for a unique patient in \code{df} has the same treatment start and end datetime.
\item Values in the "Number of Patients" table are the number of patients for each arm with treatment duration equal to
or greater than the given time (times corresponding to the figure's x-ticks labels).
\item Records with missing treatment start and/or end datetime are excluded from all calculations.
}
}
\examples{
adsl <- random.cdisc.data::cadsl
adsl$TRTSDTM <- adsl$TRTSDTM[1]
adsl$TRTEDTM <- adsl$TRTSDTM + lubridate::days(sample(0:400, nrow(adsl), replace = TRUE))

fig <- make_fig_01(df = adsl)
fig

}
