% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fda-table_04.R
\name{make_table_04_gtsummary}
\alias{make_table_04_gtsummary}
\title{Generate Disposition Summary Table Using \code{gtsummary}}
\usage{
make_table_04_gtsummary(
  df,
  id_var = "USUBJID",
  arm_var = "ARM",
  reason_var = "DCSREAS",
  pop_vars = c("SAFFL", "ITTFL"),
  lbl_pop_vars = c("Safety population", "ITT/mITT population"),
  display_all_column = FALSE
)
}
\arguments{
\item{df}{A data frame containing subject-level disposition data. Must include variables such as
\code{EOTSTT}, \code{EOSSTT}, and \code{DCSREAS}, in addition to the specified \code{id_var}, \code{arm_var}, and \code{pop_vars}.}

\item{id_var}{A string indicating the subject ID variable name. Default is \code{"USUBJID"}.}

\item{arm_var}{A string indicating the treatment arm variable name. Default is \code{"ARM"}.}

\item{reason_var}{A string indicating the discontinuation reason variable. Default is \code{"DCSREAS"}.}

\item{pop_vars}{A character vector of population flag variables (e.g., \code{"SAFFL"}, \code{"ITTFL"}). Default is \code{c("SAFFL", "ITTFL")}.}

\item{lbl_pop_vars}{A character vector of labels corresponding to \code{pop_vars}. Default is \code{c("Safety population", "ITT/mITT population")}.}

\item{display_all_column}{Logical indicating whether to include an "All Patients" column in the summary. Default is \code{FALSE}.}
}
\value{
A \code{gtsummary::tbl_summary} object with formatted output:
\itemize{
\item Summarizes population flags and discontinuation reasons,
\item Applies human-readable labels,
\item Indents subcategories under main categories,
\item Optionally includes an "All" column.
}
}
\description{
This function creates a formatted disposition summary table (Table 04) using the \code{gtsummary} package.
It summarizes population flags and study drug/study discontinuation reasons by treatment group,
with labeled rows and indentation for subcategories.
}
\details{
The function:
\itemize{
\item Validates the presence of required columns,
\item Applies flag logic (e.g., \code{"Y"} to \code{TRUE}) and attaches variable labels using \code{with_label},
\item Constructs derived variables for study drug and study discontinuations based on \code{EOTSTT}, \code{EOSSTT}, and \code{DCSREAS},
\item Uses \code{gtsummary::tbl_summary()} to build a formatted table grouped by \code{arm_var},
\item Indents sub-reasons (e.g., "Adverse event", "Death") under their respective parent categories,
\item Optionally adds an "All Patients" summary column.
}
}
\examples{
\dontrun{
df <- your_disposition_data
make_table_04_gtsummary(df, pop_vars = c("SAFFL"), lbl_pop_vars = c("Safety population"))
}

}
